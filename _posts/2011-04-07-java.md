---
date: 2011-04-07
layout: post
title: !binary |
  amF2YeWGheWtmA==
thread: 164
categories: 软件
tags:  java 内存
---

对java内存的一点小小总结，java内存主要涉及一下几个区域：
寄存器,静态域，常量池，堆和栈

其中寄存器不可控制，静态域主要存放static成员，常量存放基本类型以及像String和Array这样的发inal对象

主要看看堆栈中如何分配，栈存储很大的优点是速度很快，主要存放对象的引用和基本类型，堆内存是运行时的数据区，存放各种new出来的对象，堆内存回收是由一个单独的gc线程管理，负责把所有没有被引用到的内存回收，堆可以动态的分配内存，但是也面临速度慢的问题。

堆中内存管理涉及几个区域，有永久区，年长区和年轻区，年轻区可分为eden区，两个存活区。

永久区主要存放Class等对象。

一个被new出来的对象首先会存在然后伊甸区，随着程序运行，如果没有被回收，则会被复制到存活区（一个存货区用于复制），如果继续存活时间足够长就会被复制到年长区，这么做主要是为了性能考虑，java对对象的回收是基于辈份的，java会认为java对象都是短命的，即存活时间都比较短（实际上也是如此），所以年长区和年轻区，存在两种gc，一种是普通gc，速度很快，另一种是full gc，占用时间较长

另java中经常涉及手动调节jvm的堆内存大小比较常用的参数有

-Xms 设置堆初始大小，默认大小是kb，也可手动改为M，如：-Xms20M 
-Xmx 设置堆的最大大小

